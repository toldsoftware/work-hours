{"version":3,"sources":["webpack:///webpack/bootstrap e83c6a2c16b79a96bf4b","webpack:///./src-webpack/work-hours-report.ts","webpack:///./src/work-hours.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,2CAA+D;AAE/D;KACI,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;KACzC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;KAC1B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAEhC,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;KAC3C,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;KAE/C,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC;KAChB,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;KAE3B,KAAK,CAAC,gBAAgB,CAAC,QAAQ,EAAE;SAC7B,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;SAEvB,IAAI,MAAM,GAAG,6BAAgB,CAAC,IAAI,CAAC,CAAC;SACpC,MAAM,CAAC,SAAS,GAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC;KAClD,CAAC,CAAC,CAAC;KAGH,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;KACpB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KACxB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAC7B,EAAC;AAtBD,uBAsBC;AAED,6BAAmC,MAAc;KAE7C,IAAI,OAAO,GAAG,0BACH,MAAM,CAAC,UAAU,aACzB,CAAC;KAEJ,IAAI,IAAI,GAAG,EAAE,CAAC;KAEd,GAAG,CAAC,CAAU,UAAW,EAAX,WAAM,CAAC,IAAI,EAAX,cAAW,EAAX,IAAW;SAApB,IAAI,CAAC;SAEN,IAAI,OAAO,GAAG,EAAE,CAAC;SACjB,GAAG,CAAC,CAAU,UAAS,EAAT,MAAC,CAAC,OAAO,EAAT,cAAS,EAAT,IAAS;aAAlB,IAAI,CAAC;aACN,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,WAAC,IAAI,iBAAQ,CAAC,WAAQ,EAAjB,CAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAE3D,OAAO,IAAI,sBAElB,CAAC,CAAC,aAAa,SAAI,CAAC,CAAC,WAAW,UAAK,CAAC,CAAC,UAAU,mBAEpD,KAAK,aACA,CAAC;UACC;SAED,IAAI,IAAI,qBAEZ,CAAC,CAAC,QAAQ,UAAK,CAAC,CAAC,UAAU,mBAE7B,OAAO,aACF,CAAC;MACH;KAID,MAAM,CAAC,YACT,OAAO,UACP,IAAI,aACC,CAAC;AAER,EAAC;AArCD,iDAqCC;AAED,MAAK,EAAE,CAAC;;;;;;;;AC3CR,2BAAiC,IAAY;KACzC,IAAI,MAAM,GAAG,EAAE,IAAI,EAAE,EAAE,EAAY,CAAC;KAEpC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,EAAE,EAAR,CAAQ,CAAC,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,GAAG,CAAC,EAAZ,CAAY,CAAC,CAAC;KAE1E,IAAI,GAAG,GAAc,IAAI,CAAC;KAC1B,IAAI,MAAM,GAAiB,IAAI,CAAC;KAEhC,GAAG,CAAC,CAAU,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK;SAAd,IAAI,CAAC;SAEN,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;aACxB,OAAO;aACP,IAAI,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;aAE1C,GAAG,GAAG;iBACF,QAAQ;iBACR,IAAI,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;iBACpC,OAAO,EAAE,EAAoB;iBAC7B,UAAU,EAAE,CAAC;cAChB,CAAC;aACF,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAE1B,CAAC;SAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;aAEjC,EAAE,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;iBACd,OAAO,CAAC,IAAI,CAAC,yBAAyB,EAAE,CAAC,CAAC,CAAC;iBAC3C,QAAQ,CAAC;aACb,CAAC;aAED,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACzB,IAAI,aAAa,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;aACvD,IAAI,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;aAElC,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,aAAa,CAAC,CAAC,CAAC;aACzE,IAAI,OAAO,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,WAAW,CAAC,CAAC,GAAG,IAAY,CAAC;aAE7G,IAAI,aAAa,GAAG,OAAO,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;aACtG,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;aAEhD,MAAM,GAAG;iBACL,aAAa;iBACb,SAAS;iBACT,WAAW;iBACX,OAAO;iBACP,UAAU;iBACV,KAAK,EAAE,EAAE;cACZ,CAAC;aACF,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAE7B,CAAC;SAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACvB,iBAAiB;aACjB,GAAG,GAAG,IAAI,CAAC;aACX,MAAM,GAAG,IAAI,CAAC;SAClB,CAAC;SAAC,IAAI,CAAC,CAAC;aACJ,EAAE,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;iBACd,OAAO,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC;iBACvC,QAAQ,CAAC;aACb,CAAC;aAED,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACzB,CAAC;MAEJ;KAED,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,CAAC,IAAK,UAAG,IAAI,CAAC,CAAC,UAAU,EAAnB,CAAmB,EAAE,CAAC,CAAC,EAAnE,CAAmE,CAAC,CAAC;KAC9F,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,CAAC,IAAK,UAAG,IAAI,CAAC,CAAC,UAAU,EAAnB,CAAmB,EAAE,CAAC,CAAC,CAAC;KAE3E,MAAM,CAAC,MAAM,CAAC;AAClB,EAAC;AApED,6CAoEC","file":"./lib/resources/work-hours-report.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e83c6a2c16b79a96bf4b","import { processWorkHours, Report } from './../src/work-hours';\r\n\r\nexport function setup() {\r\n    let host = document.createElement('div');\r\n    host.innerHTML = 'LOADED';\r\n    document.body.appendChild(host);\r\n\r\n    let output = document.createElement('div');\r\n    let input = document.createElement('textarea');\r\n\r\n    input.rows = 10;\r\n    input.style.width = '100%';\r\n\r\n    input.addEventListener('change', () => {\r\n        let text = input.value;\r\n\r\n        let report = processWorkHours(text);\r\n        output.innerHTML = generateReportHtml(report);\r\n    });\r\n\r\n\r\n    host.innerHTML = '';\r\n    host.appendChild(input);\r\n    host.appendChild(output);\r\n}\r\n\r\nexport function generateReportHtml(report: Report): string {\r\n\r\n    let summary = `</div>\r\nTotal Hours: ${report.totalHours}\r\n</div>`;\r\n\r\n    let days = '';\r\n\r\n    for (let d of report.days) {\r\n\r\n        let periods = '';\r\n        for (let p of d.periods) {\r\n            let tasks = p.tasks.map(t => `<div>${t}</div>`).join('\\n');\r\n\r\n            periods += `<div>\r\n<div>\r\n## ${p.timeStartText}-${p.timeEndText} (${p.totalHours})\r\n</div>\r\n${tasks}\r\n</div>`;\r\n        }\r\n\r\n        days += `<div>\r\n<div>\r\n# ${d.dateText} (${d.totalHours})\r\n</div>\r\n${periods}\r\n</div>`;\r\n    }\r\n\r\n\r\n\r\n    return `<div>\r\n${summary}\r\n${days}\r\n</div>`;\r\n\r\n}\r\n\r\nsetup();\n\n\n// WEBPACK FOOTER //\n// ./src-webpack/work-hours-report.ts","\r\nexport interface Report {\r\n    totalHours: number;\r\n    days: ReportDay[];\r\n}\r\n\r\nexport interface ReportDay {\r\n    date: Date;\r\n    dateText: string;\r\n    totalHours: number;\r\n    periods: ReportPeriod[];\r\n}\r\n\r\nexport interface ReportPeriod {\r\n    timeStartText: string;\r\n    timeEndText: string;\r\n    timeStart: Date;\r\n    timeEnd: Date;\r\n    totalHours: number;\r\n    tasks: string[];\r\n}\r\n\r\nexport function processWorkHours(text: string): Report {\r\n    let report = { days: [] } as Report;\r\n\r\n    let lines = text.split('\\n').map(x => x.trim()).filter(x => x.length > 0);\r\n\r\n    let day: ReportDay = null;\r\n    let period: ReportPeriod = null;\r\n\r\n    for (let l of lines) {\r\n\r\n        if (l.match(/^# 20\\d{2}/)) {\r\n            // Date\r\n            let dateText = l.replace('# ', '').trim();\r\n\r\n            day = {\r\n                dateText,\r\n                date: new Date(Date.parse(dateText)),\r\n                periods: [] as ReportPeriod[],\r\n                totalHours: 0\r\n            };\r\n            report.days.push(day);\r\n\r\n        } else if (l.match(/^## \\d{1,2}:/)) {\r\n\r\n            if (day == null) {\r\n                console.warn('Time period has no day:', l);\r\n                continue;\r\n            }\r\n\r\n            let parts = l.split('-');\r\n            let timeStartText = parts[0].replace('## ', '').trim();\r\n            let timeEndText = parts[1].trim();\r\n\r\n            let timeStart = new Date(Date.parse(day.dateText + ' ' + timeStartText));\r\n            let timeEnd = timeEndText.length > 0 ? new Date(Date.parse(day.dateText + ' ' + timeEndText)) : null as Date;\r\n\r\n            let total5Minutes = timeEnd != null ? (timeEnd.getTime() - timeStart.getTime()) / (5 * 60 * 1000) : 0;\r\n            let totalHours = Math.round(total5Minutes) / 12;\r\n\r\n            period = {\r\n                timeStartText,\r\n                timeStart,\r\n                timeEndText,\r\n                timeEnd,\r\n                totalHours,\r\n                tasks: []\r\n            };\r\n            day.periods.push(period);\r\n\r\n        } else if (l.match('^#')) {\r\n            // Ignore section\r\n            day = null;\r\n            period = null;\r\n        } else {\r\n            if (day == null) {\r\n                console.warn('Task has no period:', l);\r\n                continue;\r\n            }\r\n\r\n            period.tasks.push(l);\r\n        }\r\n\r\n    }\r\n\r\n    report.days.forEach(d => d.totalHours = d.periods.reduce((out, p) => out += p.totalHours, 0));\r\n    report.totalHours = report.days.reduce((out, d) => out += d.totalHours, 0);\r\n\r\n    return report;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/work-hours.ts"],"sourceRoot":""}